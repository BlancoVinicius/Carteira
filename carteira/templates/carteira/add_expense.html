{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Add an Expense</h5>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('add_expense') }}">
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <input type="text" class="form-control" id="description" name="description" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="amount" class="form-label">Amount</label>
                        <div class="input-group">
                            <span class="input-group-text">$</span>
                            <input type="number" class="form-control" id="amount" name="amount" step="0.01" min="0.01" required>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="split_type" class="form-label">Split Type</label>
                        <select class="form-select" id="split_type" name="split_type">
                            <option value="equal" selected>Equally</option>
                            <option value="percentage">By percentage</option>
                            <option value="exact">Exact amounts</option>
                        </select>
                    </div>
                    
                    <!-- This would be dynamically populated with friends/groups in a real app -->
                    <div class="mb-4">
                        <label class="form-label">Split with</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="user1" checked disabled>
                            <label class="form-check-label" for="user1">
                                {{ current_user.username }} (you)
                            </label>
                        </div>
                        {% for user in users %}
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="{{ user.id }}" id="user{{ user.id }}" name="users" checked>
                            <label class="form-check-label" for="user{{ user.id }}">
                                {{ user.username }}
                            </label>
                        </div>
                        {% endfor %}
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary">Save Expense</button>
                        <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // This would be enhanced with JavaScript in a real app
    // to handle dynamic splitting options and calculations
    document.addEventListener('DOMContentLoaded', function() {
        const amountInput = document.getElementById('amount');
        const splitTypeSelect = document.getElementById('split_type');
        
        // Add input validation
        amountInput.addEventListener('input', function() {
            if (this.value < 0) {
                this.value = 0.01;
            }
        });
    });
</script>
{% endblock %}
